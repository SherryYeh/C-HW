#include<stdio.h>
int A[3][12]={
{20,21,22,30,31,32,58,57,56,10,11,12},
{23,24,25,33,34,35,55,54,53,13,14,15},
{26,27,28,36,37,38,52,51,50,16,17,18}
};
int B[3][12]={
{20,23,26,40,43,46,50,53,56,60,63,66},
{21,24,27,41,44,47,51,54,57,61,64,67},
{22,25,28,42,45,48,52,55,58,62,65,68}
};
int swap(int *C,int *D){
    int tmp;
    tmp=*C;
    *C=*D;
    *D=tmp;
}
int turn(int B[3][12],int start){
    int tmp[3][3],i;
    for(i=0;i<3;i++){
        tmp[i][0]=B[i][start];
        tmp[i][1]=B[i][start+1];
        tmp[i][2]=B[i][start+2];
    }
    B[0][start]=tmp[0][2];
    B[0][start+1]=tmp[1][2];
    B[0][start+2]=tmp[2][2];
    B[1][start]=tmp[0][1];
    B[1][start+1]=tmp[1][1];
    B[1][start+2]=tmp[2][1];
    B[2][start]=tmp[0][0];
    B[2][start+1]=tmp[1][0];
    B[2][start+2]=tmp[2][0];
}
int pop(int A[12]){
    int tmp,i;
    tmp=A[0];
    for(i=0;i<11;i++){
    A[i]=A[i+1];
    }
    A[11]=tmp;
}
int main(){
    int i;
    char input[50];
    while(1){
        scanf("%s",input);
        if(strcmp(input,"-1")==0)
            break;
        if(strcmp(input,"0R")==0){
            for(i=0;i<9;i++)
                pop(A[0]);
            B[0][0]=A[0][0];
            B[1][0]=A[0][1];
            B[2][0]=A[0][2];
            B[0][8]=A[0][8];
            B[1][8]=A[0][7];
            B[2][8]=A[0][6];
            for(i=0;i<3;i++)
                turn(B,9);

        }
        if(strcmp(input,"0L")==0){
            for(i=0;i<3;i++)
                pop(A[0]);
            B[0][0]=A[0][0];
            B[1][0]=A[0][1];
            B[2][0]=A[0][2];
            B[0][8]=A[0][8];
            B[1][8]=A[0][7];
            B[2][8]=A[0][6];
            for(i=0;i<1;i++)
                turn(B,9);

        }
        if(strcmp(input,"0U")==0){
            for(i=0;i<3;i++)
                pop(B[0]);
            A[0][0]=B[0][0];
            A[1][0]=B[0][1];
            A[2][0]=B[0][2];
            A[0][8]=B[0][8];
            A[1][8]=B[0][7];
            A[2][8]=B[0][6];
            for(i=0;i<1;i++)
                turn(A,9);

        }
        if(strcmp(input,"0D")==0){
            for(i=0;i<9;i++)
                pop(B[0]);
            A[0][0]=B[0][0];
            A[1][0]=B[0][1];
            A[2][0]=B[0][2];
            A[0][8]=B[0][8];
            A[1][8]=B[0][7];
            A[2][8]=B[0][6];
            for(i=0;i<3;i++)
                turn(A,9);
        }
        if(strcmp(input,"4R")==0){
            for(i=0;i<9;i++)
                pop(A[1]);
            B[0][1]=A[1][0];
            B[1][1]=A[1][1];
            B[2][1]=A[1][2];
            B[0][7]=A[1][8];
            B[1][7]=A[1][7];
            B[2][7]=A[1][6];
        }
        if(strcmp(input,"4L")==0){
            for(i=0;i<3;i++)
                pop(A[1]);
            B[0][1]=A[1][0];
            B[1][1]=A[1][1];
            B[2][1]=A[1][2];
            B[0][7]=A[1][8];
            B[1][7]=A[1][7];
            B[2][7]=A[1][6];

        }
        if(strcmp(input,"4U")==0){
            for(i=0;i<3;i++)
                pop(B[1]);
            A[0][1]=B[1][0];
            A[1][1]=B[1][1];
            A[2][1]=B[1][2];
            A[0][7]=B[1][8];
            A[1][7]=B[1][7];
            A[2][7]=B[1][6];
            for(i=0;i<1;i++)
                turn(A,9);

        }
        if(strcmp(input,"4D")==0){
            for(i=0;i<9;i++)
                pop(B[1]);
            A[0][1]=B[1][0];
            A[1][1]=B[1][1];
            A[2][1]=B[1][2];
            A[0][7]=B[1][8];
            A[1][7]=B[1][7];
            A[2][7]=B[1][6];
            for(i=0;i<3;i++)
                turn(A,9);
        }
        if(strcmp(input,"8R")==0){
            for(i=0;i<9;i++)
                pop(A[2]);
            B[0][2]=A[2][0];
            B[1][2]=A[2][1];
            B[2][2]=A[2][2];
            B[0][6]=A[2][8];
            B[1][6]=A[2][7];
            B[2][6]=A[2][6];
            for(i=0;i<1;i++)
                turn(B,3);

        }
        if(strcmp(input,"8L")==0){
            for(i=0;i<3;i++)
                pop(A[2]);
            B[0][2]=A[2][0];
            B[1][2]=A[2][1];
            B[2][2]=A[2][2];
            B[0][6]=A[2][8];
            B[1][6]=A[2][7];
            B[2][6]=A[2][6];
            for(i=0;i<3;i++)
                turn(B,3);

        }
        if(strcmp(input,"8U")==0){
            for(i=0;i<3;i++)
                pop(B[2]);
            A[0][2]=B[2][0];
            A[1][2]=B[2][1];
            A[2][2]=B[2][2];
            A[0][6]=B[2][8];
            A[1][6]=B[2][7];
            A[2][6]=B[2][6];
            for(i=0;i<3;i++)
                turn(A,3);

        }
        if(strcmp(input,"8D")==0){
            for(i=0;i<9;i++)
                pop(B[2]);
            A[0][2]=B[2][0];
            A[1][2]=B[2][1];
            A[2][2]=B[2][2];
            A[0][6]=B[2][8];
            A[1][6]=B[2][7];
            A[2][6]=B[2][6];
            for(i=0;i<1;i++)
                turn(A,3);
        }
        if(strcmp(input,"CL")==0){
            for(i=0;i<1;i++){
                turn(A,0);
            }
            for(i=0;i<3;i++){
                turn(B,0);
            }
            swap(&A[0][11],&B[2][11]);
            swap(&A[1][11],&B[1][11]);
            swap(&A[2][11],&B[0][11]);
            swap(&A[0][3],&B[0][11]);
            swap(&A[1][3],&B[1][11]);
            swap(&A[2][3],&B[2][11]);
            swap(&A[0][3],&B[2][3]);
            swap(&A[1][3],&B[1][3]);
            swap(&A[2][3],&B[0][3]);
        }
        if(strcmp(input,"CR")==0){
            for(i=0;i<1;i++){
                turn(B,0);
            }
            for(i=0;i<3;i++){
                turn(A,0);
            }
            swap(&A[0][3],&B[0][11]);
            swap(&A[1][3],&B[1][11]);
            swap(&A[2][3],&B[2][11]);
            swap(&A[2][11],&B[0][11]);
            swap(&A[1][11],&B[1][11]);
            swap(&A[0][11],&B[2][11]);
            swap(&A[2][11],&B[2][3]);
            swap(&A[1][11],&B[1][3]);
            swap(&A[0][11],&B[0][3]);
        }
    }

    int j;
    for(i=0;i<3;i++){
        for(j=0;j<3;j++)
            printf("%d ",A[i][j]);
        printf("\n");
    }


}
